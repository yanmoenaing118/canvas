import RectMap from "./RectMap";
import { colors } from "./canvas";
import { TileSpriteFrame, Vec2 } from "./classes";

export default class RectLevel extends RectMap {
  spwans: {
    [key: string]: Vec2;
  } = {};

  constructor(public w: number, public h: number) {
    const tileSize = 32;
    const mapW = (w / tileSize) | 0;
    const mapH = (h / tileSize) | 0;

    const data = [
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 651, 651, 651, 0, 0, 0, 0, 0, 651, 651, 651, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 651, 651, 651, 651, 651, 0, 0, 0, 651, 651,
      651, 651, 651, 0, 0, 0, 0, 0, 0, 0, 0, 651, 651, 651, 651, 651, 651, 651,
      0, 651, 651, 651, 651, 651, 651, 651, 0, 0, 0, 0, 0, 0, 0, 651, 651, 651,
      651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 0, 0, 0, 0, 0,
      0, 0, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651,
      651, 651, 0, 0, 0, 0, 0, 0, 0, 651, 651, 651, 651, 651, 651, 651, 651,
      651, 651, 651, 651, 651, 651, 651, 0, 0, 0, 0, 0, 0, 0, 651, 651, 651,
      651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 0, 0, 0, 0, 0,
      0, 0, 0, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651, 651,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 651, 651, 651, 651, 651, 651, 651, 651, 651,
      651, 651, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 651, 651, 651, 651, 651,
      651, 651, 651, 651, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 651, 651,
      651, 651, 651, 651, 651, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      651, 651, 651, 651, 651, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 651, 651, 651, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    ];
    let spwans: { [key: string]: Vec2 } = {};
    const level: TileSpriteFrame[] = [];

    data.forEach((item, i) => {
      const x = (i % mapW) * tileSize;
      const y = ((i / mapH) | 0) * tileSize;
      if (item === 651) {
        level.push({ x, y, color: "red" });
      }
    });

    console.log(level);

    super(level, mapW, mapH, tileSize, tileSize);
    this.spwans = spwans;
  }
}
